#!/usr/bin/env bash
# pre-commit hook que genera un changelog con commits no tagueados

if command -v git-changelog >/dev/null 2>&1; then
  echo "üîÑ Generando CHANGELOG.md..."
  git-changelog -o CHANGELOG.md --config-file .git-changelog.toml --unreleased

  if ! git diff --quiet -- CHANGELOG.md; then
    git add CHANGELOG.md
    echo "‚úÖ CHANGELOG.md actualizado y agregado al commit."
  else
    echo "‚ÑπÔ∏è No hay cambios nuevos para registrar en el changelog."
  fi
else
  echo "‚ö†Ô∏è git-changelog no est√° instalado. Ejecuta: pip install git-changelog"
fi
